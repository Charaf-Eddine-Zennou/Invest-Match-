<div class="register-container">
  <div class="step-progress">
    <div class="step" *ngFor="let step of steps; let i = index" [class.active]="i < currentStep"></div>
  </div>

  <button class="back-button" (click)="goBack()" [disabled]="currentStep === 1">←</button>

  <!-- Étape 1 -->
  <div *ngIf="currentStep === 1" class="form-step">
    <h2>Informations personnelles</h2>
    <div class="form-group">
      <label>Nom complet</label>
      <input type="text" [(ngModel)]="formData.name" name="name" />
    </div>
    <div class="form-group">
      <label>Email</label>
      <input type="email" [(ngModel)]="formData.email" name="email" />
    </div>
    <div class="form-group">
  <label>Mot de passe</label>
  <input type="password" [(ngModel)]="formData.password" name="password" />
</div>

<div class="form-group">
  <label>Confirmer le mot de passe</label>
  <input type="password" [(ngModel)]="formData.confirmPassword" name="confirmPassword" />
</div>
    <div class="form-group">
      <label>Niveau</label>
      <select [(ngModel)]="formData.niveau" name="niveau">
        <option *ngFor="let niv of niveaux" [value]="niv">{{ niv }}</option>
      </select>
    </div>

    <h2>Localisation</h2>
    <div class="form-group">
      <label>Ville</label>
      <input type="text" [(ngModel)]="formData.location_city" (blur)="onCityBlur()" />
    </div>
  </div>

  <!-- Étape 2 -->
  <div *ngIf="currentStep === 2" class="form-step">
    <h2>Secteurs préférés</h2>
    <div class="checkbox-group">
      <label *ngFor="let sector of availableSectors">
        <input type="checkbox" [checked]="formData.secteurs_pref.includes(sector)" (change)="toggleSector(sector)" />
        {{ sector }}
      </label>
    </div>
  </div>

  <!-- Étape 3 -->
  <div *ngIf="currentStep === 3" class="form-step"> 
    <h2>Modèle économique</h2>
    <div class="form-group">
      <label>Modèle économique préféré</label>
      <select [(ngModel)]="formData.modele_eco_pref" name="modele">
        <option *ngFor="let model of modelesEconomiques" [value]="model">{{ model }}</option>
      </select>
    </div>

    <h2>Critères financiers</h2>
    <div class="form-grid">
      <div class="form-group">
        <label>Budget min (€)</label>
        <input type="number" [(ngModel)]="formData.budget_min" />
      </div>
      <div class="form-group">
        <label>Budget max (€)</label>
        <input type="number" [(ngModel)]="formData.budget_max" />
      </div>
      <div class="form-group">
        <label>Taille min entreprise</label>
        <input type="number" [(ngModel)]="formData.taille_min" />
      </div>
      <div class="form-group">
        <label>Taille max entreprise</label>
        <input type="number" [(ngModel)]="formData.taille_max" />
      </div>
    </div>

    <h2>Préférences d'investissement</h2>
    <div class="form-grid">
      <div class="form-group">
        <label>Valo pré-money min (M€)</label>
        <input type="number" [(ngModel)]="formData.valo_pre_min" />
      </div>
      <div class="form-group">
        <label>Valo pré-money max (M€)</label>
        <input type="number" [(ngModel)]="formData.valo_pre_max" />
      </div>
      <div class="form-group">
        <label>Valo post-money min (M€)</label>
        <input type="number" [(ngModel)]="formData.valo_post_min" />
      </div>
      <div class="form-group">
        <label>Valo post-money max (M€)</label>
        <input type="number" [(ngModel)]="formData.valo_post_max" />
      </div>
    </div>

    <h2>Stades d’investissement</h2>
    <div class="checkbox-group">
      <label *ngFor="let stage of seedStages">
        <input type="checkbox" [checked]="formData.seed_pref.includes(stage)" (change)="toggleSeed(stage)" />
        {{ stage }}
      </label>
    </div>
  </div>
  <button class="next-button" (click)="goNext()" [disabled]="currentStep === steps.length">→</button>
</div>

  <!-- Étape 4 -->
  <div *ngIf="currentStep === 4" class="welcome-step">
    <h1>Bienvenue</h1>
    <img src="assets/icons/fundly_logo.png" alt="Logo" class="logo" />
    <img src="assets/icons/fundly_nb.png" alt="Titre" class="title" />
     <div *ngIf="emailExists" class="text-red-500 mt-2">
    votre email est déjà utilisé. Veuillez en choisir un autre.
  </div>
    <button (click)="submitForm()" >Commencer à explorer</button>
  </div>

